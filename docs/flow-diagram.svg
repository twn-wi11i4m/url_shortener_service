<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="1287px" preserveAspectRatio="none" style="width:1000px;height:1287px;background:#FFFFFF;" version="1.1" viewBox="0 0 1000 1287" width="1000px" zoomAndPan="magnify"><defs/><g><rect fill="none" height="323.5938" style="stroke:#000000;stroke-width:1.5;" width="852.5" x="10" y="141.4297"/><rect fill="none" height="191.9297" style="stroke:#000000;stroke-width:1.5;" width="852.5" x="10" y="522.1563"/><rect fill="none" height="133.6641" style="stroke:#000000;stroke-width:1.5;" width="441" x="10" y="925.1484"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="39" x2="39" y1="81.2969" y2="1206.3438"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="197" x2="197" y1="81.2969" y2="1206.3438"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="384" x2="384" y1="81.2969" y2="1206.3438"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="502" x2="502" y1="81.2969" y2="1206.3438"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="621" x2="621" y1="81.2969" y2="1206.3438"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="796.5" x2="796.5" y1="81.2969" y2="1206.3438"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="956.5" x2="956.5" y1="81.2969" y2="1206.3438"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="32" x="20" y="77.9951">User</text><ellipse cx="39" cy="13.5" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M39,21.5 L39,48.5 M26,29.5 L52,29.5 M39,48.5 L26,63.5 M39,48.5 L52,63.5 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="32" x="20" y="1218.3389">User</text><ellipse cx="39" cy="1230.1406" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M39,1238.1406 L39,1265.1406 M26,1246.1406 L52,1246.1406 M39,1265.1406 L26,1280.1406 M39,1265.1406 L52,1280.1406 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="92" x="151" y="50"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="78" x="158" y="69.9951">URL Router</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="92" x="151" y="1205.3438"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="78" x="158" y="1225.3389">URL Router</text><rect fill="#E2E2F0" height="46.5938" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="114" x="327" y="33.7031"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="100" x="334" y="53.6982">URL Shortener</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="50" x="359" y="69.9951">Service</text><rect fill="#E2E2F0" height="46.5938" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="114" x="327" y="1205.3438"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="100" x="334" y="1225.3389">URL Shortener</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="50" x="359" y="1241.6357">Service</text><rect fill="#E2E2F0" height="46.5938" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="103" x="451" y="33.7031"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="89" x="458" y="53.6982">URL Redirect</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="50" x="477.5" y="69.9951">Service</text><rect fill="#E2E2F0" height="46.5938" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="103" x="451" y="1205.3438"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="89" x="458" y="1225.3389">URL Redirect</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="50" x="477.5" y="1241.6357">Service</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="115" x="564" y="50"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="101" x="571" y="69.9951">URL Generator</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="115" x="564" y="1205.3438"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="101" x="571" y="1225.3389">URL Generator</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="106" x="740.5" y="77.9951">PostgreSQL DB</text><path d="M778.5,29 C778.5,19 796.5,19 796.5,19 C796.5,19 814.5,19 814.5,29 L814.5,55 C814.5,65 796.5,65 796.5,65 C796.5,65 778.5,65 778.5,55 L778.5,29 " fill="#E2E2F0" style="stroke:#181818;stroke-width:1.5;"/><path d="M778.5,29 C778.5,39 796.5,39 796.5,39 C796.5,39 814.5,39 814.5,29 " fill="none" style="stroke:#181818;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="106" x="740.5" y="1218.3389">PostgreSQL DB</text><path d="M778.5,1231.6406 C778.5,1221.6406 796.5,1221.6406 796.5,1221.6406 C796.5,1221.6406 814.5,1221.6406 814.5,1231.6406 L814.5,1257.6406 C814.5,1267.6406 796.5,1267.6406 796.5,1267.6406 C796.5,1267.6406 778.5,1267.6406 778.5,1257.6406 L778.5,1231.6406 " fill="#E2E2F0" style="stroke:#181818;stroke-width:1.5;"/><path d="M778.5,1231.6406 C778.5,1241.6406 796.5,1241.6406 796.5,1241.6406 C796.5,1241.6406 814.5,1241.6406 814.5,1231.6406 " fill="none" style="stroke:#181818;stroke-width:1.5;"/><rect fill="#E2E2F0" height="46.5938" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="64" x="924.5" y="33.7031"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="44" x="934.5" y="53.6982">Config</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="50" x="931.5" y="69.9951">Service</text><rect fill="#E2E2F0" height="46.5938" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="64" x="924.5" y="1205.3438"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="44" x="934.5" y="1225.3389">Config</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="50" x="931.5" y="1241.6357">Service</text><rect fill="#EEEEEE" height="3" style="stroke:#EEEEEE;stroke-width:1.0;" width="993.5" x="0" y="111.8633"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="993.5" y1="111.8633" y2="111.8633"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="993.5" y1="114.8633" y2="114.8633"/><rect fill="#EEEEEE" height="23.1328" style="stroke:#000000;stroke-width:2.0;" width="171" x="411.25" y="101.2969"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="152" x="417.25" y="117.3638">URL Shortening Flow</text><path d="M10,141.4297 L181,141.4297 L181,148.5625 L171,158.5625 L10,158.5625 L10,141.4297 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="323.5938" style="stroke:#000000;stroke-width:1.5;" width="852.5" x="10" y="141.4297"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="126" x="25" y="154.4966">Create Short URL</text><polygon fill="#181818" points="185,190.8281,195,194.8281,185,198.8281,189,194.8281" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="39" x2="191" y1="194.8281" y2="194.8281"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="134" x="51" y="174.6294">POST /api/url/shorten</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="66" x="85" y="189.7622">(long URL)</text><polygon fill="#181818" points="372,219.9609,382,223.9609,372,227.9609,376,223.9609" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="197" x2="378" y1="223.9609" y2="223.9609"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="163" x="209" y="218.895">Validate and process URL</text><polygon fill="#181818" points="609.5,249.0938,619.5,253.0938,609.5,257.0938,613.5,253.0938" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="384" x2="615.5" y1="253.0938" y2="253.0938"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="142" x="431.75" y="248.0278">Generate unique code</text><polygon fill="#181818" points="784.5,278.2266,794.5,282.2266,784.5,286.2266,788.5,282.2266" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="621.5" x2="790.5" y1="282.2266" y2="282.2266"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="151" x="633.5" y="277.1606">Check code uniqueness</text><polygon fill="#181818" points="632.5,307.3594,622.5,311.3594,632.5,315.3594,628.5,311.3594" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="626.5" x2="795.5" y1="311.3594" y2="311.3594"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="82" x="668" y="306.2935">Confirmation</text><polygon fill="#181818" points="395,336.4922,385,340.4922,395,344.4922,391,340.4922" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="389" x2="620.5" y1="340.4922" y2="340.4922"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="60" x="472.75" y="335.4263">URL code</text><polygon fill="#181818" points="784.5,365.625,794.5,369.625,784.5,373.625,788.5,369.625" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="384" x2="790.5" y1="369.625" y2="369.625"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="124" x="528.25" y="364.5591">Store URL mapping</text><polygon fill="#181818" points="395,394.7578,385,398.7578,395,402.7578,391,398.7578" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="389" x2="795.5" y1="398.7578" y2="398.7578"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="53" x="563.75" y="393.6919">Success</text><polygon fill="#181818" points="208,423.8906,198,427.8906,208,431.8906,204,427.8906" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="202" x2="383" y1="427.8906" y2="427.8906"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="64" x="258.5" y="422.8247">Short URL</text><polygon fill="#181818" points="50,453.0234,40,457.0234,50,461.0234,46,457.0234" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="44" x2="196" y1="457.0234" y2="457.0234"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="127" x="54.5" y="451.9575">Short URL response</text><rect fill="#EEEEEE" height="3" style="stroke:#EEEEEE;stroke-width:1.0;" width="993.5" x="0" y="492.5898"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="993.5" y1="492.5898" y2="492.5898"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="993.5" y1="495.5898" y2="495.5898"/><rect fill="#EEEEEE" height="23.1328" style="stroke:#000000;stroke-width:2.0;" width="175" x="409.25" y="482.0234"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="156" x="415.25" y="498.0903">URL Redirection Flow</text><path d="M10,522.1563 L183,522.1563 L183,529.2891 L173,539.2891 L10,539.2891 L10,522.1563 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="191.9297" style="stroke:#000000;stroke-width:1.5;" width="852.5" x="10" y="522.1563"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="128" x="25" y="535.2231">Access Short URL</text><polygon fill="#181818" points="185,556.4219,195,560.4219,185,564.4219,189,560.4219" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="39" x2="191" y1="560.4219" y2="560.4219"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="68" x="84" y="555.356">GET /:code</text><polygon fill="#181818" points="490.5,585.5547,500.5,589.5547,490.5,593.5547,494.5,589.5547" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="197" x2="496.5" y1="589.5547" y2="589.5547"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="85" x="307.25" y="584.4888">Process code</text><polygon fill="#181818" points="784.5,614.6875,794.5,618.6875,784.5,622.6875,788.5,618.6875" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="502.5" x2="790.5" y1="618.6875" y2="618.6875"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="110" x="594.5" y="613.6216">Lookup URL code</text><polygon fill="#181818" points="513.5,643.8203,503.5,647.8203,513.5,651.8203,509.5,647.8203" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="507.5" x2="795.5" y1="647.8203" y2="647.8203"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="77" x="611" y="642.7544">Original URL</text><polygon fill="#181818" points="208,672.9531,198,676.9531,208,680.9531,204,676.9531" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="202" x2="501.5" y1="676.9531" y2="676.9531"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="79" x="310.25" y="671.8872">Redirect info</text><polygon fill="#181818" points="50,702.0859,40,706.0859,50,710.0859,46,706.0859" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="44" x2="196" y1="706.0859" y2="706.0859"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="116" x="60" y="701.02">HTTP 301 Redirect</text><rect fill="#EEEEEE" height="3" style="stroke:#EEEEEE;stroke-width:1.0;" width="993.5" x="0" y="741.6523"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="993.5" y1="741.6523" y2="741.6523"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="993.5" y1="744.6523" y2="744.6523"/><rect fill="#EEEEEE" height="23.1328" style="stroke:#000000;stroke-width:2.0;" width="153" x="420.25" y="731.0859"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="134" x="426.25" y="747.1528">Database Schema</text><path d="M801,769.2188 L801,869.2188 L987,869.2188 L987,779.2188 L977,769.2188 L801,769.2188 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M977,769.2188 L977,779.2188 L987,779.2188 L977,769.2188 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="81" x="807" y="786.2856">URLs Table</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="163" x="807" y="801.4185">- id (SERIAL PRIMARY KEY)</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="139" x="807" y="816.5513">- url_code (VARCHAR)</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="103" x="807" y="831.6841">- long_url (TEXT)</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="109" x="807" y="846.8169">- short_url (TEXT)</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="165" x="807" y="861.9497">- created_at (TIMESTAMP)</text><rect fill="#EEEEEE" height="3" style="stroke:#EEEEEE;stroke-width:1.0;" width="993.5" x="0" y="895.582"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="993.5" y1="895.582" y2="895.582"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="993.5" y1="898.582" y2="898.582"/><rect fill="#EEEEEE" height="23.1328" style="stroke:#000000;stroke-width:2.0;" width="126" x="433.75" y="885.0156"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="107" x="439.75" y="901.0825">Error Handling</text><path d="M10,925.1484 L167,925.1484 L167,932.2813 L157,942.2813 L10,942.2813 L10,925.1484 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="133.6641" style="stroke:#000000;stroke-width:1.5;" width="441" x="10" y="925.1484"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="112" x="25" y="938.2153">Error Scenarios</text><polygon fill="#181818" points="185,959.4141,195,963.4141,185,967.4141,189,963.4141" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="39" x2="191" y1="963.4141" y2="963.4141"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="93" x="71.5" y="958.3481">Invalid request</text><polygon fill="#181818" points="372,988.5469,382,992.5469,372,996.5469,376,992.5469" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="197" x2="378" y1="992.5469" y2="992.5469"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="103" x="239" y="987.481">Process request</text><polygon fill="#181818" points="208,1017.6797,198,1021.6797,208,1025.6797,204,1021.6797" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="202" x2="383" y1="1021.6797" y2="1021.6797"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="77" x="252" y="1016.6138">Error details</text><polygon fill="#181818" points="50,1046.8125,40,1050.8125,50,1054.8125,46,1050.8125" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="44" x2="196" y1="1050.8125" y2="1050.8125"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="94" x="71" y="1045.7466">Error response</text><rect fill="#EEEEEE" height="3" style="stroke:#EEEEEE;stroke-width:1.0;" width="993.5" x="0" y="1086.3789"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="993.5" y1="1086.3789" y2="1086.3789"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="993.5" y1="1089.3789" y2="1089.3789"/><rect fill="#EEEEEE" height="23.1328" style="stroke:#000000;stroke-width:2.0;" width="221" x="386.25" y="1075.8125"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="202" x="392.25" y="1091.8794">Configuration Management</text><polygon fill="#181818" points="807.5,1126.0781,797.5,1130.0781,807.5,1134.0781,803.5,1130.0781" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="801.5" x2="955.5" y1="1130.0781" y2="1130.0781"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="136" x="808.5" y="1125.0122">Database connection</text><polygon fill="#181818" points="208,1155.2109,198,1159.2109,208,1163.2109,204,1159.2109" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="202" x2="955.5" y1="1159.2109" y2="1159.2109"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="103" x="525.25" y="1154.145">Base URL config</text><polygon fill="#181818" points="395,1184.3438,385,1188.3438,395,1192.3438,391,1188.3438" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="389" x2="955.5" y1="1188.3438" y2="1188.3438"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="89" x="625.75" y="1183.2778">Service config</text><!--MD5=[2a623a1bd5feee31428744ed7a6713b9]
@startuml
skinparam backgroundColor white
skinparam handwritten false
skinparam defaultFontName sans-serif
skinparam sequenceMessageAlign center
skinparam BoxPadding 10

actor User
participant "URL Router" as Router
participant "URL Shortener\nService" as ShortenerService
participant "URL Redirect\nService" as RedirectService
participant "URL Generator" as Generator
database "PostgreSQL DB" as DB

== URL Shortening Flow ==
group Create Short URL
    User -> Router: POST /api/url/shorten\n(long URL)
    Router -> ShortenerService: Validate and process URL
    ShortenerService -> Generator: Generate unique code
    Generator -> DB: Check code uniqueness
    DB - -> Generator: Confirmation
    Generator - -> ShortenerService: URL code
    ShortenerService -> DB: Store URL mapping
    DB - -> ShortenerService: Success
    ShortenerService - -> Router: Short URL
    Router - -> User: Short URL response
end

== URL Redirection Flow ==
group Access Short URL
    User -> Router: GET /:code
    Router -> RedirectService: Process code
    RedirectService -> DB: Lookup URL code
    DB - -> RedirectService: Original URL
    RedirectService - -> Router: Redirect info
    Router - -> User: HTTP 301 Redirect
end

== Database Schema ==
note right of DB
  **URLs Table**
  - id (SERIAL PRIMARY KEY)
  - url_code (VARCHAR)
  - long_url (TEXT)
  - short_url (TEXT)
  - created_at (TIMESTAMP)
end note

== Error Handling ==
group Error Scenarios
    User -> Router: Invalid request
    Router -> ShortenerService: Process request
    ShortenerService - -> Router: Error details
    Router - -> User: Error response
end

== Configuration Management ==
participant "Config\nService" as Config

Config -> DB: Database connection
Config -> Router: Base URL config
Config -> ShortenerService: Service config
@enduml

PlantUML version 1.2022.7(Mon Aug 22 17:01:30 UTC 2022)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: null
--></g></svg>